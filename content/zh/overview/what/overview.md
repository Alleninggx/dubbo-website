---
type: docs
title: "了解 Dubbo 的核心概念和架构"
linkTitle: "概念与架构"
weight: 10
description: ""
---

![arch-service-discovery](/imgs/architecture.png)

以上是 Dubbo 的工作原理架构图，有三个核心的抽象角色：服务消费者 (Client/Consumer)、服务提供者 (Server/Provider)、服务治理中心。
* **代表业务服务的消费者和提供者统称为 Dubbo 数据面**，组成数据面的业务服务之间依赖 Dubbo 实现数据传输，即某个服务 (消费者) 以 RPC 或 HTTP 形式发起调用，目标服务 (提供者) 收到并回复对方的请求，Dubbo 定义了微服务开发与调用规范并完成数据传输的编解码工作。
* **服务治理中心控制并观测 Dubbo 数据面的流量**，比如作为注册中心协调服务组件间的地址自动发现、作为规则管控中心下发流量治理策略等。治理中心不是特指如注册中心类的单个具体组件，而是对 Dubbo 治理体系的抽象表达。

## Dubbo 数据面
从数据面的视角，Dubbo 解决了微服务实践中的以下问题：
* Dubbo 作为**服务开发框架**定义了微服务定义、开发与调用的规范
* Dubbo 作为 **RPC 通信协议实现**解决服务间通信的编解码工作

![架构图](#)

### 服务开发框架
微服务的目标是构建足够小的、自包含的、独立演进的、可以随时部署运行的分布式应用程序，几乎每个语言都有类似的应用开发框架来帮助开发者快速构建此类微服务应用，比如 Java 微服务体系的 Spring Boot，它帮 Java 微服务开发者以最少的配置、最轻量的方式快速开发、打包、部署与运行应用。

微服务的分布式特性，使得应用间的依赖、网络交互、数据传输变得更频繁，因此不同的**微服务应用需要定义、暴露或调用 RPC 服务，那么这些 RPC 服务如何定义、如何与应用开发框架结合、服务调用行为如何控制？这就是 Dubbo 服务开发框架的含义，Dubbo 在微服务应用开发框架之上抽象了一套 RPC 服务定义、暴露、调用与治理的编程范式**，比如 Dubbo Java 作为服务开发框架，当运行在 Spring 体系时就是构建在 Spring Boot 应用开发框架之上的微服务开发框架，并在此之上抽象了一套 RPC 服务定义、暴露、调用与治理的编程范式。

Dubbo 作为服务开发框架包含的具体内容如下：
* **RPC 服务定义**。IDL、多语言Java、Golang 等
* **RPC 服务调用暴露与调用 API**。同步、异步、Reactive Streaming
* **RPC 服务行为、治理相关配置**。超时、延迟注册、预热、治理中心等，xml yaml properties

这些 Dubbo 服务的行为，你也何种形式发起调用，

快速体验如何用 Dubbo 开发微服务：
* [Java](../../..docs3-v2/java-sdk/)
* [Golang]()
* [Rust]()
* [Node]()

### 通信协议
**Dubbo 从设计上不绑定任何一款特定通信协议，REST、gRPC、Json-rpc、Hessian2 等几乎所有主流的通信协议 Dubbo 框架都可以提供支持。** 这样的 Protocol 设计模式给构建微服务带来了最大的灵活性，开发者可以根据需要如性能、通用型等选择不同的通信协议，不再需要任何的代理来实现协议转换，甚至你还可以通过 Dubbo 实现不同协议间的迁移。

Dubbo Protocol 被设计支持扩展，您可以将内部私有协议适配到 Dubbo 框架上，进而将私有协议接入 Dubbo 体系，以享用 Dubbo 的开发体验与服务治理能力。比如 Dubbo3 的典型用户阿里巴巴，就是通过扩展支持 HSF 协议实现了内部 HSF 框架到 Dubbo3 框架的整体迁移。Dubbo 还支持多协议暴露，您可以在单个端口上暴露多个协议，Dubbo Server 能够自动识别并确保请求被正确处理，也可以将同一个 RPC 服务发布在不同的端口（协议），为不同技术栈的调用方服务。Dubbo 灵活的通信协议设计可满足各种微服务通信场景的组合。

Dubbo 提供了两款**内置高性能 Dubbo2、Triple (兼容 gRPC) 协议实现**，以满足部分微服务用户对高性能通信的诉求。Dubbo2 协议是在 TCP 传输层协议之上设计的二进制通信协议，而 Triple 则是基于 HTTP/2 之上构建的支持流式模式的通信协议，并且 Triple 完全兼容 gRPC 但实现上做了更多的符合 Dubbo 框架特点的优化，两者最开始都设计和诞生于阿里巴巴内部的高性能通信业务场景。

总的来说，Dubbo 对通信协议的支持具有以下特点：
* 不绑定通信协议
* 提供高性能通信协议实现
* 支持流式通信模型
* 不绑定序列化协议，
* 支持单个服务的多协议暴露
* 支持单端口多协议发布

![dubbo-rpc](/imgs/v3/concepts/rpc.png)

## Dubbo 服务治理
只有服务开发框架还不够，要构建符合 12 要素的微服务应用，开发者还需要解决无状态服务节点动态变化、外部化配置、日志跟踪、可观测性、流量管理、高可用性等一系列问题。Dubbo 抽象了一套微服务治理模式并提供了一系列官方实现，用来帮助开发、运维简化微服务实践，更专注在微服务业务本身。

Dubbo 提供的服务治理能力包括:

* **服务发现**

服务地址注册与发现是构建微服务体系的关键，Dubbo 默认提供 Nacos、Zookeeper 等注册中心并支持自定义扩展；Dubbo3 应用级服务发现模型解决 Dubbo2 规模瓶颈问题的同时，实现了与 Kubernetes Native Service 及 Spring Cloud 等微服务体系的互通。

* **负载均衡**


* **动态配置**



* **流量路由**

Dubbo 支持通过一系列流量规则控制服务与服务之间的流量分布与行为，基于这些规则可以实现基于权重流量分布、流量灰度验证、金丝雀发布、按请求参数的路由、超时、限流降级等能力。

* **链路追踪**

多维度的可观测指标（Metrics、Tracing、Access Logs）帮助了解服务运行状态，为持续定位、维护和优化服务提供依据，Admin 控制台帮助实现数据指标可视化展示

* **服务网格**

多种形态数据面支持，包括以 Thin SDK 模式与 Envoy 等一起部署或以 Proxyless 模式独立部署，所有模式均可以开源标准方式无缝接入 Istio、Consul 等服务治理体系。

除此之外，Dubbo 生态体系还提供了对 API 网关、限流降级、数据一致性、认证鉴权等场景的支持。


